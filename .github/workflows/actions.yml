name : run-python-file

on :  [push]
  schedule:

    - cron: '0 */2 * * *' # “At   0 */2 * * * =======>>>>>>> At minute 0 past every 2nd hour..”
  workflow_dispatch:

permissions:
  id-token: write
  contents: read # default

jobs:
  format-code:
    
    build:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout code
          uses: actions/checkout@v3
        - name: Set up python
          uses: actions/setup-python@v2
          with:
            python-version: 3.11
        - name: install python packages
          run: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt
        - name : run gtu notification

          env:
            SMTP_RECEIVER_EMAIL : ${{secrets.SMTP_RECEIVER_EMAIL}}
            SMTP_SENDER_EMAIL: ${{secrets.SMTP_SENDER_EMAIL}}
            SMTP_PASSWORD: ${{secrets.SMTP_PASSWORD}}

          run: python main.py
        - uses: stefanzweifel/git-auto-commit-action@v4
        
